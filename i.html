<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>

</style>
<body>
    <div class="task-list" id="pending">
        <h3>Pending</h3>
        <!-- Sample task added manually to check look -->
        <div class="todo-task">
          <div class="task-header">To-do Header</div>
          <div class="task-date">08/11/2017</div>
          <div class="task-description">Valentine Target</div>
        </div>
      </div>
      <div class="task-list" id="inProgress">
        <h3>In Progress</h3>
      </div>
      <div class="task-list" id="completed">
        <h3>Completed</h3>
      </div>
      <div class="task-list">
        <h3>Add a task</h3>
        <form id="todo-form">
          <input type="text" placeholder="Title" />
          <textarea placeholder="Descrtipion"></textarea>
          <input type="text" placeholder="Due Date (dd/mm/yyyy)" />
          <input type="button" class="btn btn-primary" value="Add Task" />
        </form>
        <input type="button" class="btn btn-primary" value="Clear Data" />
        <div id="delete-div">Drag Here to Delete</div>
      </div>
      <script>
        var defaults = {
  // CSS selectors and attributes that would be used by the JavaScript functions
  todoTask: "todo-task",
  todoHeader: "task-header",
  todoDate: "task-date",
  todoDescription: "task-description",
  taskId: "task-",
  formId: "todo-form",
  dataAttribute: "data",
  deleteDiv: "delete-div"
}, codes = {
  "1" : "#pending", // For pending tasks
  "2" : "#inProgress",
  "3" : "#completed"
};

// Add Task
//Guys don't forget, we are nothing but pencils in the hands
//of the feeling.
var generateElement = function(params) {
  var parent = $(codes[params.code]),
      wrapper;
  if (!parent) {
    return;
  }
  wrapper = $("<div />", {
    "class" : defaults.todoTask,
    "id" : defaults.taskId + params.id,
    "data" : params.id
  }).appendTo(parent);
  $("<div />", {
    "class" : defaults.todoHeader,
    "text": params.title
  }).appendTo(wrapper);
  $("<div />", {
    "class" : defaults.todoDate,
    "text": params.date
  }).appendTo(wrapper);
  $("<div />", {
    "class" : defaults.todoDescription,
    "text": params.description
  }).appendTo(wrapper);
};


generateElement({
  id: "123",
  code: "1",
  title: "Valentine to-do task",
  date: "08/11/2017",
  description: "I have to do a lot of steps to implement this task!"
});

var removeElement = function(params) {
  $("#" + defaults.taskId + params.id).remove();
};

var data = JSON.parse(localStorage.getItem("todoData"));



var addItem = function() {
  var inputs = $("#" + defaults.formId + " :input"),
      errorMessage = "Title can not be empty",
      id, title, description, date, tempData;
  if (inputs.length !== 4) {
    return;
  }
  title = inputs[0].value;
  description = inputs[1].value;
  date = inputs[2].value;
  if (!title) {
    generateDialog(errorMessage);
    return;
  }
  id = new Date().getTime();
  tempData = {
    id : id,
    code: "1",
    title: title,
    date: date,
    description: description
  };
  // Saving element in local storage
  data[id] = tempData;
  localStorage.setItem("todoData", JSON.stringify(data));
  // Generate Todo Element
  generateElement(tempData);
  // Reset Form
  inputs[0].value = "";
  inputs[1].value = "";
  inputs[2].value = "";
};

$("." + defaults.todoTask).draggable();
// Add Task
var generateElement = function(params) {
  wrapper.draggable({
    start: function() {
      $("#" + defaults.deleteDiv).show();
    },
    stop: function() {
      $("#" + defaults.deleteDiv).hide();
    }
  });

};


// Adding drop function to each category of task
$.each(codes, function(index, value) {
  $(value).droppable({
    drop: function(event, ui) {
      var element = ui.helper,
          css_id = element.attr("id"),
          id = css_id.replace(options.taskId, ""),
          object = data[id];
      // Removing old element
      removeElement(object);
      // Changing object code
      object.code = index;
      // Generating new element
      generateElement(object);
      // Updating Local Storage
      data[id] = object;
      localStorage.setItem("todoData", JSON.stringify(data));
      // Hiding Delete Area
      $("#" + defaults.deleteDiv).hide();
    }
  });
});


// Adding drop function to delete div
$("#" + options.deleteDiv).droppable({
  drop: function(event, ui) {
    var element = ui.helper,
        css_id = element.attr("id"),
        id = css_id.replace(options.taskId, ""),
        object = data[id];
    // Removing old element
    removeElement(object);
    // Updating local storage
    delete data[id];
    localStorage.setItem("todoData", JSON.stringify(data));
    // Hiding Delete Area
    $("#" + defaults.deleteDiv).hide();
  }
});

      </script>
</body>
</html>